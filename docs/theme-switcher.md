# Implement a Theme Switcher with Clerk

Theme switchers allow users to toggle between light mode and dark mode.

> [!TIP]
> Before you start ensure you have created your Next. js application, and implemented Clerk.
> Follow Clerk's [Next.js Quickstart Guide](https://clerk.com/docs/quickstarts/nextjs) to get started.

## Install `next-themes`

Run the following command to install [`next-themes`](https://github.com/pacocoursey/next-themes)

```shell
npm install next-themes
# or
yarn add next-themes
```

## To your `providers` directory, add `theme-provider.tsx`

The theme provider will facilitate the switching of themes on all of its children.

1. Create a `theme-provider.tsx` file

   This will be in the same location as your `clerk-provider.tsx` file

   - If you're using the `/src` directory, create `theme-provider.tsx` in `/src/providers`
   - If you're not using the `/src` directory, create `theme-provider.tsx` in `/providers`

2. Copy and paste the following file into your `theme-provider.tsx` file. This creates your `<ThemeProvider>` component using `next-themes` `NextThemeProvider` and ensures that content is not rendered until after the first client-side mount. This prevents a hydration error.

   ```typescript
   // providers/theme-provider.tsx
   'use client'

   import * as React from 'react'
   import { ThemeProvider as NextThemeProvider } from 'next-themes'

   export function ThemeProvider({
     children,
     ...props
   }: React.ComponentProps<typeof NextThemeProvider>) {
     const [mounted, setMounted] = React.useState(false)

     // Only render content after first client-side mount
     React.useEffect(() => {
       setMounted(true)
     }, [])

     // Return null on server-side and first render
     if (!mounted) return null

     // Only render theme provider when we're on the client
     return <NextThemeProvider {...props}>{children}</NextThemeProvider>
   }
   ```

## To your app layout, add `<ThemeProvider>` as the first child of your `<body>`

Ensure your `<ThemeProvider>` wraps your `<ClerkProvider>` in order to switch Clerk themes with your theme switcher.

Include the props `attribute="class"` and `enableSystem` on your `<ThemeProvider>` opening tag.

Copy and paste the following into your `layout.tsx` file in your `app` directory. You can replace the existing code with the following, or simply add in the opening and closing `<ThemeProvider>` tags.

```typescript
// /app/layout.tsx
import type { Metadata } from 'next'
import {
  SignInButton,
  SignUpButton,
  SignedIn,
  SignedOut,
  UserButton,
} from '@clerk/nextjs'
import { ThemeProvider } from '../providers/theme-provider'
import ClerkProvider from '../providers/clerk-provider'
import { Geist, Geist_Mono } from 'next/font/google'
import './globals.css'

const geistSans = Geist({
  variable: '--font-geist-sans',
  subsets: ['latin'],
})

const geistMono = Geist_Mono({
  variable: '--font-geist-mono',
  subsets: ['latin'],
})

export const metadata: Metadata = {
  title: 'Clerk Next.js Quickstart',
  description: 'Generated by create next app',
}

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode
}>) {
  return (
    <html lang="en">
      <body
        className={`${geistSans.variable} ${geistMono.variable} antialiased`}
      >
        <ThemeProvider attribute="class" enableSystem>
          <ClerkProvider>
            <header className="flex justify-end items-center p-4 gap-4 h-16">
              <SignedOut>
                <SignInButton />
                <SignUpButton />
              </SignedOut>
              <SignedIn>
                <UserButton />
              </SignedIn>
            </header>
            {children}
          </ClerkProvider>
        </ThemeProvider>
      </body>
    </html>
  )
}
```
