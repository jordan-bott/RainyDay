# Implement a Theme Switcher with Clerk

Theme switchers allow users to toggle between light mode and dark mode.

> [!TIP]
> Before you start ensure you have created your Next. js application, and implemented Clerk.
> Follow Clerk's [Next.js Quickstart Guide](https://clerk.com/docs/quickstarts/nextjs) to get started.

## Install `next-themes`

Run the following command to install [`next-themes`](https://github.com/pacocoursey/next-themes)

```shell
npm install next-themes
# or
yarn add next-themes
```

## Create `theme-provider.tsx`

The theme provider will facilitate the switching of themes on all of its children.

1. Create a `theme-provider.tsx` file

   - If you're using the `/src` directory, create `theme-provider.tsx` in `/src/providers`
   - If you're not using the `/src` directory, create `theme-provider.tsx` in `/providers`

   For reference, your `providers` directory should be the same level as your `/app` directory.

2. Copy and paste the following file into your `theme-provider.tsx` file. This creates your `<ThemeProvider>` component using `next-themes` `NextThemeProvider` and ensures that content is not rendered until after the first client-side mount. This prevents a hydration error.

   ```typescript
   // providers/theme-provider.tsx
   'use client'

   import * as React from 'react'
   import { ThemeProvider as NextThemeProvider } from 'next-themes'

   export function ThemeProvider({
     children,
     ...props
   }: React.ComponentProps<typeof NextThemeProvider>) {
     const [mounted, setMounted] = React.useState(false)

     // Only render content after first client-side mount
     React.useEffect(() => {
       setMounted(true)
     }, [])

     // Return null on server-side and first render
     if (!mounted) return null

     // Only render theme provider when we're on the client
     return <NextThemeProvider {...props}>{children}</NextThemeProvider>
   }
   ```

## To your app layout, add `<ThemeProvider>` as the first child of your `<body>`

Ensure your `<ThemeProvider>` wraps your `<ClerkProvider>` in order to switch Clerk themes with your theme switcher.

Include the props `attribute="class"` and `enableSystem` on your `<ThemeProvider>` opening tag.

Copy and paste the following into your `layout.tsx` file in your `app` directory. You can replace the existing code with the following, or simply add in the opening and closing `<ThemeProvider>` tags wrapping your existing `<ClerkProvider>`.

```tsx
// /app/layout.tsx
import type { Metadata } from 'next'
import {
  ClerkProvider,
  SignInButton,
  SignUpButton,
  SignedIn,
  SignedOut,
  UserButton,
} from '@clerk/nextjs'
import { Geist, Geist_Mono } from 'next/font/google'
import './globals.css'

const geistSans = Geist({
  variable: '--font-geist-sans',
  subsets: ['latin'],
})

const geistMono = Geist_Mono({
  variable: '--font-geist-mono',
  subsets: ['latin'],
})

export const metadata: Metadata = {
  title: 'Clerk Next.js Quickstart',
  description: 'Generated by create next app',
}

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode
}>) {
  return (
    <ClerkProvider>
      <html lang="en">
        <body
          className={`${geistSans.variable} ${geistMono.variable} antialiased`}
        >
          <ThemeProvider attribute="class" enableSystem>
            <header className="flex justify-end items-center p-4 gap-4 h-16">
              <SignedOut>
                <SignInButton />
                <SignUpButton />
              </SignedOut>
              <SignedIn>
                <UserButton />
              </SignedIn>
            </header>
            {children}
          </ThemeProvider>
        </body>
      </html>
    </ClerkProvider>
  )
}
```

## Create a simple theme switcher with [`useTheme()`](https://github.com/pacocoursey/next-themes?tab=readme-ov-file#usetheme)

The `useTheme()` hook from `next-themes` provides access to both setting the theme, and viewing the current theme.

> [!NOTE]
> Any UI can be used for the theme switcher so long as `setTheme()` is used with an event handler such as `onClick`. The following example uses two buttons: one for light mode, and one for dark mode to control which theme is used by the app.

```tsx
import { useTheme } from 'next-themes'

const ThemeChanger = () => {
  const { theme, setTheme } = useTheme()

  return (
    <div>
      The current theme is: {theme}
      <button onClick={() => setTheme('light')}>Light Mode</button>
      <button onClick={() => setTheme('dark')}>Dark Mode</button>
    </div>
  )
}

export default ThemeChanger
```

You can place your `ThemeChanger` component wherever you would like in your application. Somewhere within the header is a common choice.
